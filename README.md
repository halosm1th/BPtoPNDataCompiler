# BPtoPNDataCompiler

A utility for scraping data from the [Bibliographie Papyrologique en ligne](https://bibpap.be/bp-en-ligne/) (BP) and reformatting it in the XML format in which it appears in [papyri.info](https://papyri.info) (PN), to enable a computational comparison of the two systems' versions of a given item. Users are presented with a side-by-side, element-by-element comparison of discrepancies and can elect to indicate which version of the file is correct, the results of which are logged to facilitate the improved integration of these two foundational resources in digital papyrology. This tool is developed with .NET Core and designed to run cross-platform.

## ğŸ–¥ï¸ Requirements

- macOS 10.15 or later
- Windows 10 or later
- The Instructions for installing DotNet can be found [here](https://learn.microsoft.com/en-us/dotnet/core/install/macos#install-net)
- Will need to download DotNet from [here](https://dotnet.microsoft.com/en-us/download/dotnet)
- A terminal application (e.g., Terminal, iTerm2)

---

## ğŸ“¥ Installing .NET SDK on macOS

1. Visit the [.NET Download page]([https://dotnet.microsoft.com/en-us/download/dotnet/6.0](https://dotnet.microsoft.com/en-us/download/dotnet)).
2. Scroll down to **macOS** and download the **.NET SDK (x64)** or **ARM64** version depending on your Mac architecture.
   - Intel Macs: use x64.
   - Apple Silicon (M1/M2/M3): use ARM64.
3. Run the downloaded installer and follow the prompts.
4. Once installed, verify the installation by running:

   ```bash
   dotnet --version
   ````

You should see the installed version number (e.g., `6.0.4`).

---

## ğŸ”§ Cloning the Repository

Open your terminal and run:

```bash
git clone https://github.com/halosm1th/BPtoPNDataCompiler.git
cd BPtoPNDataCompiler
```

---


## ğŸš€ Running the Project

Run the compiled app using:

```bash
dotnet run
```

You can pass any required arguments as needed. If the program expects input files or specific parameters, be sure to include them in your command line call (you may need to consult the code or usage examples for details).

---
### ğŸ“ Directory structure
The `BPtoPNDataCompiler/` folder containing the program files should be a sibling of the `idp.data/` folder whose `Biblio/` child provides the local `*.xml` files that will be compared to the [BP en ligne](https://bibpap.be/), as in the following structure:

```bash
- Base folder/
â”œâ”€â”€ idp.data/
 â””â”€â”€ Biblio/
â”œâ”€â”€ BPtoPNDataCompiler/
 â”œâ”€â”€ bin/ (generated by C# when building the program)
 â”œâ”€â”€ obj/ (generated by C# when building the program)
 â”œâ”€â”€ *.cs
 â”œâ”€â”€ *.csproj
 â”œâ”€â”€ *.md
 â”œâ”€â”€ *.csv
 â””â”€â”€ *.sln
```
Opening the `.zip` archive downloaded from GitHub will create an additional `BPtoPNDataCompiler/` folder, whose contents should be moved up a level.

---
## Help Menu

To see the help menu use:
```bash
dotnet run -m
```
or
```bash
./BPtoPnDataCompiler -m
```

If entered, the following menu will print:
```bash
Description:
  BP to PN Data Compiler: Compiles and updates bibliographic data from BP and PN sources.

Usage:
  BPtoPNDataCompiler [options]

Options:
  -s, -t, --start-year <start-year>              Sets the start year for data compilation. Use -s or --start-year. Default is 1932. Cannot be less than 1932. [default: 1932]
  -d, -e, --end-year <end-year>                  Sets the end year for data compilation. Use -d or --end-year. Default is the current system year -1 (Currently: 2024). Cannot be lower than the start year. [default: 
                                                 2024]
  -b, -bps, --bp-start-number <bp-start-number>  Sets the beginning number for BP data processing. Use -bps or --bp-start-number. Default is 0. Cannot be negative. [default: 1]
  -bpe, -f, --bp-end-number <bp-end-number>      Sets the finishing number for BP data processing. Use -bpe or --bp-end-number. Default is maximum integer value. Cannot be less than the BP start number. [default: 
                                                 9999]
  -c, --compare-author-names                     Sets if the author names should be a field to be compared. Defaults to false. [default: False]
  -nd, --no-delete                               If used, will **not** delete the resulting folder that is zipped. By default this folder is zipped and deleted after the program is run [default: False]
  -m, --menu                                     Show help menu. [default: False]
  --version                                      Show version information
  -?, -h, --help                                 Show help and usage information
```

---

## ğŸ“ Project Structure

```text
BPtoPNDataCompiler/
â”œâ”€â”€ Program.cs          # Main entry point
â”œâ”€â”€ ...                 # Other C# source files
â”œâ”€â”€ BPtoPNDataCompiler.csproj
â””â”€â”€ README.md           # Project documentation
```

---

## â“ Troubleshooting

* **`dotnet: command not found`**
  Ensure the .NET SDK is correctly installed and added to your `$PATH`.

* **Project not building?**
  Make sure you're using the right version of the .NET SDK. Check the `.csproj` file for the target framework (e.g., `net6.0`) and install the corresponding SDK version.

---

## ğŸ¤ Contributing

Pull requests are welcome. For major changes, please open an issue first to discuss your ideas.

---

## ğŸ‘¤ Author

* [halosm1th](https://github.com/halosm1th)
